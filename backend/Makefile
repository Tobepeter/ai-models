.PHONY: dev docker-dev docker-down build run test clean bootstrap

BINARY_NAME=main
MAIN_PATH=./cmd/main.go

# NOTE: æŒ‡å®š file åé»˜è®¤ä¸ä¼šåº”ç”¨ docker-compose.override.yml æ–‡ä»¶
dev:
	docker-compose -f docker-compose.yml up -d
	IS_AIR_DEV=true air -c .air.toml

docker-dev:
	@echo "ğŸ³ å¯åŠ¨ Docker å¼€å‘ç¯å¢ƒ..."
	docker-compose up

docker-down:
	docker-compose down

# æ„å»ºå’Œè¿è¡Œ
build:
	go build -o $(BINARY_NAME) $(MAIN_PATH)

run:
	go run $(MAIN_PATH)

# å·¥å…·å‘½ä»¤  
test:
	go test -v ./...

clean:
	go clean
	rm -f $(BINARY_NAME)

bootstrap:
	go install github.com/air-verse/air@latest
