# ä¿¡æ¯æµé¡µé¢

ä¸€ä¸ªç±»ä¼¼Twitter/å¾®åšçš„ä¿¡æ¯æµé¡µé¢ï¼Œæ”¯æŒæ— é™æ»šåŠ¨ã€ç‚¹èµã€å†…å®¹æŠ˜å ç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½

- **ğŸ“± å“åº”å¼å¸ƒå±€**: ä¸‰æ å¸ƒå±€ï¼ˆå¤´åƒä¿¡æ¯ + æ–‡å­—å†…å®¹ + å•å¼ å›¾ç‰‡ï¼‰
- **ğŸ”„ æ— é™æ»šåŠ¨**: è§¦åº•è‡ªåŠ¨åŠ è½½æ›´å¤šå†…å®¹
- **â¬‡ï¸ ä¸‹æ‹‰åˆ·æ–°**: é¡¶éƒ¨åˆ·æ–°æŒ‰é’®ï¼Œæ”¯æŒæ‰‹åŠ¨åˆ·æ–°
- **â¤ï¸ ç‚¹èµåŠŸèƒ½**: å¸¦åŠ¨ç”»æ•ˆæœçš„ç‚¹èµ/å–æ¶ˆç‚¹èµ
- **ğŸ“ é•¿å†…å®¹æŠ˜å **: è¶…è¿‡200å­—ç¬¦è‡ªåŠ¨æŠ˜å ï¼Œæ”¯æŒå±•å¼€/æ”¶èµ·
- **ğŸ–¼ï¸ å›¾ç‰‡æ‡’åŠ è½½**: è¿›å…¥è§†å£æ‰åŠ è½½å›¾ç‰‡ï¼Œæ”¯æŒç‚¹å‡»é¢„è§ˆ
- **ğŸ’€ éª¨æ¶å±**: åŠ è½½çŠ¶æ€çš„shimmeræ•ˆæœ
- **âš¡ æ€§èƒ½ä¼˜åŒ–**: ä½¿ç”¨ZustandçŠ¶æ€ç®¡ç†ï¼Œæ”¯æŒæ•°æ®æŒä¹…åŒ–
- **ğŸ¨ åŠ¨ç”»æ•ˆæœ**: ä½¿ç”¨framer-motionå®ç°æµç•…åŠ¨ç”»

### ğŸš§ å¾…å®ç°åŠŸèƒ½

- **ğŸ“ åˆ›å»ºå¸–å­**: å‘å¸ƒæ–°å†…å®¹
- **ğŸ’¬ è¯„è®ºåŠŸèƒ½**: è¯„è®ºå’Œå›å¤
- **ğŸ”— åˆ†äº«åŠŸèƒ½**: åˆ†äº«åˆ°å…¶ä»–å¹³å°
- **ğŸ” è™šæ‹Ÿæ»šåŠ¨**: é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–
- **ğŸ“± ä¸‹æ‹‰åˆ·æ–°**: æ‰‹åŠ¿ä¸‹æ‹‰åˆ·æ–°

## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæ–‡ä»¶

```
src/pages/feed/
â”œâ”€â”€ feed.tsx                 # ä¸»é¡µé¢
â”œâ”€â”€ feed-store.ts           # ZustandçŠ¶æ€ç®¡ç†
â”œâ”€â”€ feed-mgr.ts             # ä¸šåŠ¡é€»è¾‘ç®¡ç†å™¨
â”œâ”€â”€ feed-util.ts            # å·¥å…·å‡½æ•°
â””â”€â”€ components/
    â”œâ”€â”€ feed-item.tsx       # å•ä¸ªå¸–å­ç»„ä»¶
    â”œâ”€â”€ feed-header.tsx     # ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨
    â”œâ”€â”€ feed-content.tsx    # æ–‡å­—å†…å®¹
    â”œâ”€â”€ feed-image.tsx      # å›¾ç‰‡ç»„ä»¶
    â”œâ”€â”€ feed-actions.tsx    # äº¤äº’æŒ‰é’®
    â”œâ”€â”€ feed-list.tsx       # è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨
    â””â”€â”€ feed-skeleton.tsx   # éª¨æ¶å±
```

### æŠ€æœ¯æ ˆ

- **çŠ¶æ€ç®¡ç†**: Zustand + æŒä¹…åŒ–
- **åŠ¨ç”»**: framer-motion
- **å·¥å…·åº“**: lodash-es, dayjs, ahooks
- **UIç»„ä»¶**: shadcn/ui
- **å›¾ç‰‡å¤„ç†**: ç°æœ‰ImagePreviewç»„ä»¶
- **æ¨¡æ‹Ÿæ•°æ®**: faker.js + dummy.ts

## ä½¿ç”¨æ–¹æ³•

### 1. è®¿é—®é¡µé¢

```
http://localhost:5173/feed
```

### 2. æµ‹è¯•ç»„ä»¶

```
http://localhost:5173/test
```

ç„¶åé€‰æ‹© "feed" æµ‹è¯•ç»„ä»¶ã€‚

### 3. ç¼–ç¨‹æ¥å£

```typescript
import { useFeedStore } from '@/pages/feed/feed-store'
import { feedMgr } from '@/pages/feed/feed-mgr'

// è·å–çŠ¶æ€
const { posts, loading, hasMore } = useFeedStore()

// åŠ è½½æ•°æ®
await feedMgr.loadInitial()
await feedMgr.loadMore()
await feedMgr.refresh()

// äº¤äº’æ“ä½œ
feedMgr.toggleLike(postId)
feedMgr.toggleExpand(postId)
```

## æ•°æ®ç»“æ„

```typescript
interface FeedPost {
	id: string
	userId: string
	username: string
	avatar: string
	status?: string // ç”¨æˆ·çŠ¶æ€emoji
	content?: string // å¯é€‰æ–‡å­—å†…å®¹
	image?: string // å¯é€‰å•å¼ å›¾ç‰‡
	createdAt: string
	likeCount: number
	commentCount: number
	isLiked: boolean
	isExpanded: boolean // é•¿å†…å®¹å±•å¼€çŠ¶æ€
}
```

## æ€§èƒ½ä¼˜åŒ–

1. **æ‡’åŠ è½½**: å›¾ç‰‡è¿›å…¥è§†å£æ‰åŠ è½½
2. **æ•°æ®æŒä¹…åŒ–**: æœ€å¤šç¼“å­˜50æ¡å¸–å­
3. **é˜²æŠ–å¤„ç†**: ç‚¹èµç­‰æ“ä½œé˜²æŠ–300ms
4. **éª¨æ¶å±**: ä¼˜åŒ–åŠ è½½ä½“éªŒ
5. **ä¹è§‚æ›´æ–°**: ç‚¹èµç«‹å³å“åº”ï¼Œå¤±è´¥æ—¶å›æ»š

## è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹å†…å®¹é•¿åº¦é™åˆ¶

```typescript
// src/pages/feed/feed-util.ts
readonly MAX_CONTENT_LENGTH = 200 // ä¿®æ”¹è¿™ä¸ªå€¼
```

### ä¿®æ”¹åˆ†é¡µå¤§å°

```typescript
// src/pages/feed/feed-mgr.ts
const posts = this.generateMockPosts(20) // ä¿®æ”¹è¿™ä¸ªå€¼
```

### ä¿®æ”¹ç¼“å­˜æ•°é‡

```typescript
// src/pages/feed/feed-store.ts
posts: state.posts.slice(0, 50) // ä¿®æ”¹è¿™ä¸ªå€¼
```

## æ³¨æ„äº‹é¡¹

1. **å›¾ç‰‡èµ„æº**: ä½¿ç”¨dummy.tsæä¾›çš„å ä½å›¾ç‰‡
2. **ç½‘ç»œå»¶è¿Ÿ**: æ¨¡æ‹Ÿ500-1500mså»¶è¿Ÿ
3. **é”™è¯¯å¤„ç†**: æ”¯æŒé‡è¯•æœºåˆ¶
4. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„TypeScriptç±»å‹æ”¯æŒ
5. **ç§»åŠ¨ç«¯é€‚é…**: å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒè§¦æ‘¸äº¤äº’
