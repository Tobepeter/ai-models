<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>AI Models</title>
		<script>
			// GitHub Pages SPA 路由处理
			// 保存当前路径到 sessionStorage，然后重定向到应用根路径
			// React Router 会在应用加载后恢复正确的路由
			;(function () {
				function getBasePath(origin, pathname) {
					const isGithub = origin.includes('github.io')
					if (isGithub) {
						const split = pathname.split('/')
						if (split[1]) {
							return '/' + split[1] + '/'
						} else {
							return '/'
						}
					}
					return '/'
				}

				function redirect() {
					const l = window.location
					const basePath = getBasePath(l.origin, l.pathname)
					// eg. l.pathname = /basepath/test/123/
					// redirectPath = /test/123
					let redirectPath = l.pathname
					if (basePath !== '/' && redirectPath.startsWith(basePath)) {
						redirectPath = redirectPath.slice(basePath.length)
					}
					if (redirectPath.length > 1 && redirectPath.endsWith('/')) {
						redirectPath = redirectPath.slice(0, -1)
					}

					sessionStorage.setItem('spa-redirect', redirectPath + l.search + l.hash)
					location.replace(l.origin + basePath)
				}
				redirect()
			})()
		</script>
	</head>
	<body>
		<div id="root">
			<div
				style="
					display: flex;
					justify-content: center;
					align-items: center;
					height: 100vh;
					height: 100dvh;
					font-family:
						system-ui,
						-apple-system,
						sans-serif;
				"
			>
				<div style="text-align: center">
					<h1>Loading...</h1>
					<p>Redirecting to the application...</p>
				</div>
			</div>
		</div>
	</body>
</html>
